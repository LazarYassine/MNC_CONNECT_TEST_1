<div class="formgrid grid p-4">
    <div class="field col-12 md:col-6">
        <label for="categoryName">Category Name</label>
        <input id="categoryName" maxlength="150" [(ngModel)]="searchCategoryName" type="text" pInputText class="w-full">
    </div>
</div>

<div class="formgrid grid p-4">
    <div class="field col-12 md:col-2">
        <p-button styleClass="p-button-primary" label="Search" icon="pi pi-search" [style]="{'minWidth':'100%'}" (click)="searchCategories()"></p-button>
    </div>

    <div class="field col-12 md:col-2">
        <p-button (click)="initialize()" styleClass="p-button-help" label="Initialize" icon="pi pi-refresh" [style]="{'minWidth':'100%'}"></p-button>
    </div>

    <div class="field col-12 md:col-2">
        <p-button styleClass="p-button-success" label="Add" icon="pi pi-plus" [style]="{'minWidth':'100%'}" (click)="showAddDialog()"></p-button>
    </div>
</div>

<div class="grid mx-3">
    <div class="col-12 md:col-6 lg:col-3" *ngFor="let item of categories" >
        <div class="text-center p-3 border-round-sm surface-card shadow-2 font-bold" [ngStyle]="{ 'border-left': '4px solid ' + ( item ? item?.border_color : '#00000') }">{{ item?.category_name }}</div>
        <div class="flex justify-content-center gap-3 mb-3">
            <div (click)="goEdit(item)" class="flex align-items-center justify-content-center bg-yellow-100 border-round mt-2"pTooltip="Edit Company Infos" style="width:2.5rem;height:2.5rem; cursor: pointer;">
                <i class="pi pi-pencil text-yellow-500 text-xl"></i>
            </div>
            <div (click)="deleteCategory(item?.id)" class="flex align-items-center justify-content-center bg-red-100 border-round mt-2" pTooltip="Delete the company" style="width:2.5rem;height:2.5rem; cursor: pointer;">
                <i class="pi pi-trash text-red-500 text-xl"></i>
            </div>
        </div>
    </div>
</div>

<p-dialog [header]="dialogHeaderTitle" [(visible)]="isAddDialogVisible" [maximizable]="true" [breakpoints]="{ '960px': '90vw' }" [modal]="true" [style]="{ width: '80vw' }" [draggable]="false" [resizable]="false">
    <ng-template pTemplate="header">
        <span class="text-xl font-bold">{{dialogHeaderTitle}}</span>
    </ng-template>
    <div class="formgrid grid p-4">
        <div class="field col-12 md:col-6">
            <label for="categoryName">Category Name</label>
            <input id="categoryName" maxlength="150" [(ngModel)]="categoryName" type="text" pInputText class="w-full">
        </div>
    
        <div class="field col-12 md:col-6 flex flex-column align-items-start justify-content-between">
            <label for="borderColor">Choose Border Color</label>
            <p-colorPicker [inline]="true" [(ngModel)]="selectedColor" class="w-full mb-3"></p-colorPicker>
        </div>
    </div>

    <ng-template pTemplate="footer">
        <div class="formgrid grid p-4">
            <div class="field col-12 md:col-2">
                <p-button styleClass="p-button-primary" label="Save" icon="pi pi-check" [style]="{'minWidth':'100%'}" (click)="saveCategory()"></p-button>
            </div>
        </div>
    </ng-template>
</p-dialog>
